<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Tích điểm khách hàng</title>
</head>
<body>
  <h2>Thêm điểm</h2>
  <input type="text" id="name" placeholder="Tên khách">
  <input type="number" id="points" placeholder="Điểm">
  <button onclick="addPoints()">Lưu</button>

  <h2>Danh sách điểm</h2>
  <table border="1" id="dataTable">
    <tr><th>ID</th><th>Tên</th><th>Điểm</th><th>Ngày</th></tr>
  </table>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbwrtCrHpVbpDmTE1Axrc02tE1JCx0GEuL_yEsIHJA9osME0EfCFm9SuJICQ1b-MRPya/exec"; // thay bằng URL API bạn vừa deploy

async function loadData() {
  let res = await fetch(API_URL);
  let data = await res.json();
  let table = document.getElementById("dataTable");

  // xóa dữ liệu cũ
  table.innerHTML = "<tr><th>ID</th><th>Tên</th><th>Điểm</th><th>Ngày</th></tr>";

  data.forEach(row => {
    table.innerHTML += `<tr>
      <td>${row.id}</td>
      <td>${row.name}</td>
      <td>${row.points}</td>
      <td>${row.date}</td>
    </tr>`;
  });
}

async function addPoints() {
  let name = document.getElementById("name").value;
  let points = parseInt(document.getElementById("points").value);
  let id = Date.now(); // tạo ID đơn giản
  
  await fetch(API_URL, {
    method: "POST",
    body: JSON.stringify({ id, name, points }),
    headers: { "Content-Type": "application/json" }
  });

  alert("Đã lưu!");
  loadData();
}

// tải dữ liệu ban đầu
loadData();
</script>
</body>
</html>
